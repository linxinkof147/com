;my.defineComponent || (my.defineComponent = Component);(my["webpackJsonp"]=my["webpackJsonp"]||[]).push([["components/home/other-login"],{2875:function(n,t,e){"use strict";e.r(t);var r=e("cd38"),o=e("8b27");for(var i in o)"default"!==i&&function(n){e.d(t,n,function(){return o[n]})}(i);e("8d71");var a=e("2877"),u=Object(a["a"])(o["default"],r["a"],r["b"],!1,null,null,null);t["default"]=u.exports},"8b27":function(n,t,e){"use strict";e.r(t);var r=e("fd25"),o=e.n(r);for(var i in r)"default"!==i&&function(n){e.d(t,n,function(){return r[n]})}(i);t["default"]=o.a},"8d71":function(n,t,e){"use strict";var r=e("a7b5"),o=e.n(r);o.a},a7b5:function(n,t,e){},cd38:function(n,t,e){"use strict";var r=function(){var n=this,t=n.$createElement;n._self._c},o=[];e.d(t,"a",function(){return r}),e.d(t,"b",function(){return o})},fd25:function(n,t,e){"use strict";(function(n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=o(e("a34a"));function o(n){return n&&n.__esModule?n:{default:n}}function i(n,t,e,r,o,i,a){try{var u=n[i](a),c=u.value}catch(s){return void e(s)}u.done?t(c):Promise.resolve(c).then(r,o)}function a(n){return function(){var t=this,e=arguments;return new Promise(function(r,o){var a=n.apply(t,e);function u(n){i(a,r,o,u,c,"next",n)}function c(n){i(a,r,o,u,c,"throw",n)}u(void 0)})}}function u(n,t){return f(n)||s(n,t)||c()}function c(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function s(n,t){var e=[],r=!0,o=!1,i=void 0;try{for(var a,u=n[Symbol.iterator]();!(r=(a=u.next()).done);r=!0)if(e.push(a.value),t&&e.length===t)break}catch(c){o=!0,i=c}finally{try{r||null==u["return"]||u["return"]()}finally{if(o)throw i}}return e}function f(n){if(Array.isArray(n))return n}var l={props:{noback:{type:Boolean,default:!0}},data:function(){return{providerList:[]}},onReady:function(){this.getLoginAuth()},methods:{MpLogin:function(t){var e=this;this.$http.post(t.url,{code:t.code,nickName:t.nickName,avatarUrl:t.avatarUrl}).then(function(t){var r=u(t,2),o=r[0],i=r[1];if(!e.$http.errorCheck(o,i))return!1;console.log(i.data.data),e.User.token=i.data.data.token,e.User.userinfo=e.User.__formatUserinfo(i.data.data),n.setStorageSync("userinfo",e.User.userinfo),n.setStorageSync("token",e.User.token),e.User.userinfo.id&&e.User.getCounts(),e.User.userinfo.id&&e.$chat.Open(),n.showToast({title:"登录成功"}),e.$emit("logining"),e.noback||n.navigateBack()})},getLoginAuth:function(){var t=this;n.getProvider({service:"oauth",success:function(n){t.providerList=n.provider.map(function(n){var t="",e="";switch(n){case"weixin":t="微信登录",e="weixin";break;case"qq":t="QQ登录",e="QQ";break;case"sinaweibo":t="新浪微博登录",e="xinlangweibo";break;case"alipay":t="支付宝登录",e="zhifubao";break}return{name:t,icon:e,id:n}})},fail:function(n){console.log("获取登录通道失败",n)}})},tologin:function(t){var e=this;n.login({provider:t.id,scopes:"auth_user",success:function(r){n.showLoading({title:"登陆中...",mask:!1}),console.log(r),n.getUserInfo({provider:t.id,success:function(n){console.log(n),e.MpLogin({url:"/alilogin",code:r.code,avatarUrl:n.userInfo.avatarUrl,nickName:n.userInfo.nickName})}}),console.log("登录成功，保存到本地存储，修改当前用户登录状态")},fail:function(n){console.log("login fail:",n)},complete:function(){n.hideLoading()}})},loginEvent:function(){var n=a(r.default.mark(function n(t){var e;return r.default.wrap(function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,this.User.login({url:"/user/otherlogin",data:t,Noback:this.noback});case 2:e=n.sent,e&&this.$emit("logining");case 4:case"end":return n.stop()}},n,this)}));function t(t){return n.apply(this,arguments)}return t}()}};t.default=l}).call(this,e("c11b")["default"])}}]);
;(my["webpackJsonp"] = my["webpackJsonp"] || []).push([
    'components/home/other-login-create-component',
    {
        'components/home/other-login-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('c11b')['createComponent'](__webpack_require__("2875"))
        })
    },
    [['components/home/other-login-create-component']]
]);                
