(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-user-set-email-user-set-email"],{"1e74":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"body"},[n("v-uni-input",{staticClass:"uni-input common-input",attrs:{type:"text",placeholder:"输入需要绑定的邮箱"},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),n("v-uni-button",{staticClass:"user-set-btn",class:{"user-set-btn-disable":t.disabled||t.isbind},attrs:{loading:t.loading,type:"primary",disabled:t.disabled||t.isbind},on:{click:function(e){e=t.$handleEvent(e),t.submit(e)}}},[t._v(t._s(t.isbind?"已绑定":"立即绑定"))])],1)},a=[];n.d(e,"a",function(){return i}),n.d(e,"b",function(){return a})},"23f7":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=a(n("a34a"));function a(t){return t&&t.__esModule?t:{default:t}}function r(t,e){return u(t)||o(t,e)||s()}function s(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function o(t,e){var n=[],i=!0,a=!1,r=void 0;try{for(var s,o=t[Symbol.iterator]();!(i=(s=o.next()).done);i=!0)if(n.push(s.value),e&&n.length===e)break}catch(u){a=!0,r=u}finally{try{i||null==o["return"]||o["return"]()}finally{if(a)throw r}}return n}function u(t){if(Array.isArray(t))return t}function d(t,e,n,i,a,r,s){try{var o=t[r](s),u=o.value}catch(d){return void n(d)}o.done?e(u):Promise.resolve(u).then(i,a)}function c(t){return function(){var e=this,n=arguments;return new Promise(function(i,a){var r=t.apply(e,n);function s(t){d(r,i,a,s,o,"next",t)}function o(t){d(r,i,a,s,o,"throw",t)}s(void 0)})}}var l={data:function(){return{isbind:!1,email:"",disabled:!0,loading:!1}},watch:{email:function(t){this.change()}},onLoad:function(t){t.email&&"false"!==t.email&&"null"!==t.email&&(this.email=t.email,this.disabled=!0,this.isbind=!0)},methods:{change:function(){if(this.email)return this.disabled=!1;this.disabled=!0},check:function(){if(!this.email||""==this.email)return uni.showToast({title:"邮箱不能为空",icon:"none"}),!1;var t=/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/;return!!t.test(this.email)||(uni.showToast({title:"请输入正确邮箱格式",icon:"none"}),!1)},submit:function(){var t=c(i.default.mark(function t(){var e,n,a,s;return i.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(this.check()){t.next=2;break}return t.abrupt("return");case 2:return this.loading=this.disabled=!0,t.next=5,this.$http.post("/user/bindemail",{email:this.email},{token:!0,checkToken:!0});case 5:if(e=t.sent,n=r(e,2),a=n[0],s=n[1],this.$http.errorCheck(a,s)){t.next=11;break}return t.abrupt("return",this.loading=this.disabled=!1);case 11:return this.isbind=!0,this.loading=this.disabled=!1,this.User.userinfo.email=this.email,uni.setStorageSync("userinfo",this.User.userinfo),t.abrupt("return",uni.showToast({title:"绑定成功！",success:function(){uni.navigateBack({delta:1})}}));case 16:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}()}};e.default=l},"5ec7":function(t,e,n){"use strict";n.r(e);var i=n("23f7"),a=n.n(i);for(var r in i)"default"!==r&&function(t){n.d(e,t,function(){return i[t]})}(r);e["default"]=a.a},"6fb2":function(t,e,n){"use strict";n.r(e);var i=n("1e74"),a=n("5ec7");for(var r in a)"default"!==r&&function(t){n.d(e,t,function(){return a[t]})}(r);n("ccdd");var s=n("2877"),o=Object(s["a"])(a["default"],i["a"],i["b"],!1,null,"5105dde6",null);e["default"]=o.exports},9129:function(t,e,n){var i=n("9adc");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=n("4f06").default;a("5be75f54",i,!0,{sourceMap:!1,shadowMode:!1})},"9adc":function(t,e,n){e=t.exports=n("2350")(!1),e.push([t.i,"/* 公共按钮 */.user-set-btn[data-v-5105dde6]{width:100%;margin:%?20?% 0;background:#ffe933!important;border:0!important;color:#333!important}.user-set-btn-disable[data-v-5105dde6]{background:#f4f4f4!important;border:%?1?% solid #eee!important;color:#909090!important}.body[data-v-5105dde6]{padding:0 %?20?%!important}.common-input[data-v-5105dde6]{font-size:%?30?%;border-bottom:%?1?% solid #f4f4f4}",""])},ccdd:function(t,e,n){"use strict";var i=n("9129"),a=n.n(i);a.a}}]);