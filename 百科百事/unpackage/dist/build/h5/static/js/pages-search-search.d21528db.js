(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-search-search"],{"0726":function(t,e,i){var n=i("fd51");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=i("4f06").default;a("1bb8d86f",n,!0,{sourceMap:!1,shadowMode:!1})},"24a0":function(t,e,i){"use strict";i.r(e);var n=i("6a48"),a=i("3eec");for(var u in a)"default"!==u&&function(t){i.d(e,t,function(){return a[t]})}(u);var r=i("2877"),s=Object(r["a"])(a["default"],n["a"],n["b"],!1,null,"6c935612",null);e["default"]=s.exports},"2ba0":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=c(i("a34a")),a=c(i("f326")),u=c(i("1306")),r=c(i("fc7a")),s=c(i("a497")),o=c(i("e563"));function c(t){return t&&t.__esModule?t:{default:t}}function d(t,e){return p(t)||f(t,e)||l()}function l(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function f(t,e){var i=[],n=!0,a=!1,u=void 0;try{for(var r,s=t[Symbol.iterator]();!(n=(r=s.next()).done);n=!0)if(i.push(r.value),e&&i.length===e)break}catch(o){a=!0,u=o}finally{try{n||null==s["return"]||s["return"]()}finally{if(a)throw u}}return i}function p(t){if(Array.isArray(t))return t}function v(t,e,i,n,a,u,r){try{var s=t[u](r),o=s.value}catch(c){return void i(c)}s.done?e(o):Promise.resolve(o).then(n,a)}function h(t){return function(){var e=this,i=arguments;return new Promise(function(n,a){var u=t.apply(e,i);function r(t){v(u,n,a,r,s,"next",t)}function s(t){v(u,n,a,r,s,"throw",t)}r(void 0)})}}var m={components:{indexList:a.default,noThing:u.default,loadMore:r.default,topicList:s.default,userList:o.default},data:function(){return{issearch:!1,loadtext:"上拉加载更多",list:[],searchtext:"",page:1,searchType:"post"}},onNavigationBarButtonTap:function(t){0==t.index&&uni.navigateBack({delta:1})},onNavigationBarSearchInputChanged:function(t){this.searchtext=t.text},onNavigationBarSearchInputConfirmed:function(t){t.text&&this.getdata()},onReachBottom:function(){this.loadmore()},onPullDownRefresh:function(){this.getdata(),uni.stopPullDownRefresh()},computed:{getPlaceholder:function(){var t="文章";return"post"==this.searchType?t="文章":"topic"==this.searchType?t="话题":"user"==this.searchType&&(t="用户"),"搜索"+t}},onLoad:function(t){t&&(this.searchType=t.searchType||"post",uni.$on("updateData",this.updateData))},methods:{goBack:function(){uni.navigateBack({delta:1})},updateData:function(t){switch(t.type){case"guanzhu":this.updateGuanZhu(t);break;case"support":this.updateSupport(t);break;case"updateComment":this.updateComment(t);break}},updateComment:function(t){var e=this.list.find(function(e){return e.id===t.post_id});e&&e.commentnum++},updateSupport:function(t){var e=this.list.find(function(e){return e.id===t.post_id});if(e){var i=e.infonum.index;e.infonum.index="ding"==t.do?1:2,0!==i&&(1==i?e.infonum.dingnum--:e.infonum.cainum--),0!==e.infonum.index&&(1==e.infonum.index?e.infonum.dingnum++:e.infonum.cainum++)}},updateGuanZhu:function(t){this.list.forEach(function(e,i){e.userid===t.userid&&(e.isguanzhu=t.data)})},getdata:function(){var t=h(n.default.mark(function t(){var e,i,a,u,r,s,o,c,l,f=this;return n.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return uni.showLoading({title:"Loading..."}),e="/search/"+this.searchType,t.next=4,this.$http.post(e,{keyword:this.searchtext,page:this.page},{token:!0});case 4:if(i=t.sent,a=d(i,2),u=a[0],r=a[1],s=this.$http.errorCheck(u,r,function(){uni.hideLoading(),f.issearch=!0},function(){uni.hideLoading(),f.issearch=!0}),s){t.next=11;break}return t.abrupt("return");case 11:for(o=[],c=r.data.data.list,console.log(r),l=0;l<c.length;l++)o.push(this.__format(c[l]));this.list=this.page>1?this.list.concat(o):o,this.issearch=!0,this.loadtext=c.length<10?"没有更多数据了":"上拉加载更多",uni.hideLoading();case 19:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),loadmore:function(){"上拉加载更多"==this.loadtext&&(this.loadtext="加载中...",this.page++,this.getdata())},__format:function(t){switch(this.searchType){case"post":return{userid:t.user.id,userpic:t.user.userpic,username:t.user.username,isguanzhu:!!t.user.fens.length,id:t.id,title:t.title,type:"img",titlepic:t.titlepic,video:!1,path:t.path,share:!!t.share,infonum:{index:t.support.length>0?t.support[0].type+1:0,dingnum:t.ding_count,cainum:t.cai_count},commentnum:t.comment_count,sharenum:t.sharenum,sex:t.user.userinfo.sex,age:t.user.userinfo.age};case"topic":return{id:t.id,titlepic:t.titlepic,title:t.title,desc:t.desc,totalnum:t.post_count,todaynum:t.todaypost_count};case"user":return{id:t.id,userpic:t.userpic,username:t.username,age:t.userinfo.age,sex:t.userinfo.sex,isguanzhu:!1}}}}};e.default=m},"3a3b":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"topic-list u-f animated fadeIn fast",on:{click:function(e){e=t.$handleEvent(e),t.opendetail(e)}}},[i("v-uni-image",{attrs:{src:t.item.titlepic,mode:"widthFix","lazy-load":""}}),i("v-uni-view",[i("v-uni-view",[t._v("#"+t._s(t.item.title)+"#")]),i("v-uni-view",[t._v(t._s(t.item.desc))]),i("v-uni-view",[t._v("动态 "+t._s(t.item.totalnum)+" 今日 "+t._s(t.item.todaynum))])],1)],1)},a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},"3eec":function(t,e,i){"use strict";i.r(e);var n=i("2ba0"),a=i.n(n);for(var u in n)"default"!==u&&function(t){i.d(e,t,function(){return n[t]})}(u);e["default"]=a.a},"66ce":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=a(i("a34a"));function a(t){return t&&t.__esModule?t:{default:t}}function u(t,e){return o(t)||s(t,e)||r()}function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function s(t,e){var i=[],n=!0,a=!1,u=void 0;try{for(var r,s=t[Symbol.iterator]();!(n=(r=s.next()).done);n=!0)if(i.push(r.value),e&&i.length===e)break}catch(o){a=!0,u=o}finally{try{n||null==s["return"]||s["return"]()}finally{if(a)throw u}}return i}function o(t){if(Array.isArray(t))return t}function c(t,e,i,n,a,u,r){try{var s=t[u](r),o=s.value}catch(c){return void i(c)}s.done?e(o):Promise.resolve(o).then(n,a)}function d(t){return function(){var e=this,i=arguments;return new Promise(function(n,a){var u=t.apply(e,i);function r(t){c(u,n,a,r,s,"next",t)}function s(t){c(u,n,a,r,s,"throw",t)}r(void 0)})}}var l={props:{item:Object,index:Number},methods:{openSpace:function(){uni.navigateTo({url:"../../pages/user-space/user-space?userid="+this.item.userid})},guanzhu:function(){var t=d(n.default.mark(function t(){var e,i,a,r,s;return n.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.$http.post("/follow",{follow_id:this.item.userid},{token:!0,checkToken:!0,checkAuth:!0});case 3:if(e=t.sent,i=u(e,2),a=i[0],r=i[1],this.$http.errorCheck(a,r)){t.next=9;break}return t.abrupt("return");case 9:uni.showToast({title:"关注成功"}),s={type:"guanzhu",userid:this.item.userid,data:!0},this.$emit("changeevent",s),uni.$emit("updateData",s),t.next=18;break;case 15:return t.prev=15,t.t0=t["catch"](0),t.abrupt("return");case 18:case"end":return t.stop()}},t,this,[[0,15]])}));function e(){return t.apply(this,arguments)}return e}(),caozuo:function(){var t=d(n.default.mark(function t(e){var i,a,r,s,o,c;return n.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,i="ding"===e?1:2,this.item.infonum.index!==i){t.next=4;break}return t.abrupt("return");case 4:return t.next=6,this.$http.post("/support",{post_id:this.item.id,type:i-1},{token:!0,checkToken:!0,checkAuth:!0});case 6:if(a=t.sent,r=u(a,2),s=r[0],o=r[1],this.$http.errorCheck(s,o)){t.next=12;break}return t.abrupt("return");case 12:uni.showToast({title:1==i?"顶成功":"踩成功"}),c={type:"support",post_id:this.item.id,do:e},this.$emit("changeevent",c),uni.$emit("updateData",c),t.next=21;break;case 18:return t.prev=18,t.t0=t["catch"](0),t.abrupt("return");case 21:case"end":return t.stop()}},t,this,[[0,18]])}));function e(e){return t.apply(this,arguments)}return e}(),opendetail:function(){uni.navigateTo({url:"../../pages/detail/detail?detailData="+JSON.stringify(this.item)}),this.User.addHistoryList(this.item)}}};e.default=l},6880:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"index-list animated fadeIn fast"},[i("v-uni-view",{staticClass:"index-list1 u-f-ac u-f-jsb"},[i("v-uni-view",{staticClass:"u-f-ac"},[i("v-uni-image",{attrs:{src:t.item.userpic,mode:"widthFix","lazy-load":""},on:{click:function(e){e.stopPropagation(),e=t.$handleEvent(e),t.openSpace(e)}}}),t._v(t._s(t.item.username))],1),i("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:!t.item.isguanzhu,expression:"!item.isguanzhu"}],staticClass:"u-f-ac",on:{click:function(e){e=t.$handleEvent(e),t.guanzhu(e)}}},[i("v-uni-view",{staticClass:"icon iconfont icon-zengjia"}),t._v("关注")],1)],1),i("v-uni-view",{staticClass:"index-list2",on:{click:function(e){e=t.$handleEvent(e),t.opendetail(e)}}},[t._v(t._s(t.item.title))]),i("v-uni-view",{staticClass:"index-list3 u-f-ajc",on:{click:function(e){e=t.$handleEvent(e),t.opendetail(e)}}},[t.item.titlepic?[i("v-uni-image",{staticStyle:{height:"350upx"},attrs:{src:t.item.titlepic,mode:"aspectFill","lazy-load":""}})]:t._e(),"video"==t.item.type?[i("v-uni-view",{staticClass:"icon iconfont icon-bofang index-list-play"}),i("v-uni-view",{staticClass:"index-list-playinfo"},[t._v(t._s(t.item.playnum)+"次播放 "+t._s(t.item.long))])]:t._e()],2),i("v-uni-view",{staticClass:"index-list4 u-f-ac u-f-jsb"},[i("v-uni-view",{staticClass:"u-f-ac"},[i("v-uni-view",{staticClass:"u-f-ac",class:{active:1==t.item.infonum.index},on:{click:function(e){e=t.$handleEvent(e),t.caozuo("ding")}}},[i("v-uni-view",{staticClass:"icon iconfont icon-icon_xiaolian-mian"}),t._v(t._s(t.item.infonum.dingnum))],1),i("v-uni-view",{staticClass:"u-f-ac",class:{active:2==t.item.infonum.index},on:{click:function(e){e=t.$handleEvent(e),t.caozuo("cai")}}},[i("v-uni-view",{staticClass:"icon iconfont icon-kulian"}),t._v(t._s(t.item.infonum.cainum))],1)],1),i("v-uni-view",{staticClass:"u-f-ac"},[i("v-uni-view",{staticClass:"u-f-ac"},[i("v-uni-view",{staticClass:"icon iconfont icon-pinglun1"}),t._v(t._s(t.item.commentnum))],1),i("v-uni-view",{staticClass:"u-f-ac"},[i("v-uni-view",{staticClass:"icon iconfont icon-zhuanfa"}),t._v(t._s(t.item.sharenum))],1)],1)],1)],1)},a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},"6a48":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",[i("v-uni-view",{staticStyle:{display:"flex","align-items":"center",padding:"0 20upx",height:"88upx",position:"fixed","z-index":"9999",left:"0",top:"0",right:"0",background:"#FFFFFF"}},[i("v-uni-view",{staticClass:"iconfont icon-sousuo",staticStyle:{position:"absolute",left:"30upx",color:"#CCCCCC"}}),i("v-uni-input",{staticStyle:{flex:"1",padding:"5upx 0 5upx 50upx","border-radius":"4px",background:"#F7F7F7"},attrs:{type:"text",placeholder:t.getPlaceholder,"placeholder-style":"color: #CCCCCC;"},on:{confirm:function(e){e=t.$handleEvent(e),t.getdata(e)}},model:{value:t.searchtext,callback:function(e){t.searchtext=e},expression:"searchtext"}}),i("v-uni-text",{staticStyle:{"padding-left":"20upx"},on:{click:function(e){e=t.$handleEvent(e),t.goBack(e)}}},[t._v("取消")])],1),i("v-uni-view",{staticStyle:{height:"88upx"}}),t.list.length>0?[t._l(t.list,function(e,n){return["post"==t.searchType?[i("index-list",{attrs:{item:e,index:n},on:{changeevent:function(e){e=t.$handleEvent(e),t.updateData(e)}}})]:"topic"==t.searchType?[i("v-uni-view",{staticStyle:{padding:"0 20upx"}},[i("topic-list",{attrs:{item:e,index:n}})],1)]:[i("v-uni-view",{staticStyle:{padding:"0 20upx"}},[i("user-list",{attrs:{item:e,index:n,hidden:""}})],1)]]}),i("load-more",{attrs:{loadtext:t.loadtext}})]:t.issearch&&t.list.length<1?[i("no-thing")]:t._e()],2)},a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},"7a6b":function(t,e,i){"use strict";i.r(e);var n=i("66ce"),a=i.n(n);for(var u in n)"default"!==u&&function(t){i.d(e,t,function(){return n[t]})}(u);e["default"]=a.a},"7a8c":function(t,e,i){var n=i("fc9b");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=i("4f06").default;a("ca680df2",n,!0,{sourceMap:!1,shadowMode:!1})},9562:function(t,e,i){"use strict";i.r(e);var n=i("be34"),a=i.n(n);for(var u in n)"default"!==u&&function(t){i.d(e,t,function(){return n[t]})}(u);e["default"]=a.a},a497:function(t,e,i){"use strict";i.r(e);var n=i("3a3b"),a=i("9562");for(var u in a)"default"!==u&&function(t){i.d(e,t,function(){return a[t]})}(u);i("dde9");var r=i("2877"),s=Object(r["a"])(a["default"],n["a"],n["b"],!1,null,"11579ede",null);e["default"]=s.exports},be34:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={props:{ischange:{type:Boolean,default:!1},item:Object,index:Number},methods:{opendetail:function(){if(this.ischange)return uni.$emit("changeTopic",{id:this.item.id,title:this.item.title}),void uni.navigateBack({delta:1});uni.navigateTo({url:"../../pages/topic-detail/topic-detail?detail="+JSON.stringify(this.item)})}}};e.default=n},dde9:function(t,e,i){"use strict";var n=i("0726"),a=i.n(n);a.a},e778:function(t,e,i){"use strict";var n=i("7a8c"),a=i.n(n);a.a},f326:function(t,e,i){"use strict";i.r(e);var n=i("6880"),a=i("7a6b");for(var u in a)"default"!==u&&function(t){i.d(e,t,function(){return a[t]})}(u);i("e778");var r=i("2877"),s=Object(r["a"])(a["default"],n["a"],n["b"],!1,null,"52bd23c7",null);e["default"]=s.exports},fc9b:function(t,e,i){e=t.exports=i("2350")(!1),e.push([t.i,".index-list[data-v-52bd23c7]{padding:%?20?%;border-bottom:%?1?% solid #eee}.index-list1>uni-view[data-v-52bd23c7]:first-child{color:#999}.index-list1>uni-view:first-child uni-image[data-v-52bd23c7]{width:%?85?%;height:%?85?%;border-radius:100%;margin-right:%?10?%}.index-list1>uni-view[data-v-52bd23c7]:last-child{background:#f4f4f4;border-radius:%?5?%;padding:0 %?10?%}.index-list2[data-v-52bd23c7]{padding-top:%?15?%;font-size:%?32?%}.index-list3[data-v-52bd23c7]{position:relative;padding-top:%?15?%}.index-list3>uni-image[data-v-52bd23c7]{width:100%;border-radius:%?20?%}.index-list4 uni-view[data-v-52bd23c7]{color:#999}.index-list4[data-v-52bd23c7]{padding:%?15?% 0}.index-list4>uni-view>uni-view[data-v-52bd23c7]:first-child,.index-list4>uni-view>uni-view>uni-view[data-v-52bd23c7]{margin-right:%?10?%}.index-list-play[data-v-52bd23c7]{position:absolute;font-size:%?140?%;color:#fff}.index-list-playinfo[data-v-52bd23c7]{position:absolute;background:rgba(51,51,51,.72);color:#fff;bottom:%?8?%;right:%?8?%;border-radius:%?40?%;font-size:%?22?%;padding:0 %?12?%}.index-list4 .active[data-v-52bd23c7],.index-list4 .active>uni-view[data-v-52bd23c7]{color:#c5f61c}",""])},fd51:function(t,e,i){e=t.exports=i("2350")(!1),e.push([t.i,".topic-list[data-v-11579ede]{padding:%?20?% 0;border-bottom:%?1?% solid #eee}.topic-list uni-image[data-v-11579ede]{width:%?150?%;height:%?150?%;border-radius:%?10?%;margin-right:%?20?%}.topic-list>uni-view>uni-view[data-v-11579ede]{color:#a4a4a4}.topic-list>uni-view>uni-view[data-v-11579ede]:first-child{color:#333;font-size:%?32?%}",""])}}]);