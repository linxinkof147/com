(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-home-home"],{"02a7":function(t,e,n){var i=n("5d75");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=n("4f06").default;a("3338ed9e",i,!0,{sourceMap:!1,shadowMode:!1})},"0370":function(t,e,n){"use strict";var i=n("f797"),a=n.n(i);a.a},"057e":function(t,e,n){"use strict";n.r(e);var i=n("84c5"),a=n("7512");for(var o in a)"default"!==o&&function(t){n.d(e,t,function(){return a[t]})}(o);n("d025");var r=n("2877"),u=Object(r["a"])(a["default"],i["a"],i["b"],!1,null,"7f571da9",null);e["default"]=u.exports},"07c5":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={props:{homeinfo:Object},methods:{ToUserSpace:function(){this.User.navigate({url:"../../pages/user-space/user-space?userid="+this.homeinfo.id})}}};e.default=i},1747:function(t,e,n){"use strict";n.r(e);var i=n("5fe0"),a=n("60c6");for(var o in a)"default"!==o&&function(t){n.d(e,t,function(){return a[t]})}(o);n("0370");var r=n("2877"),u=Object(r["a"])(a["default"],i["a"],i["b"],!1,null,"b1a9b936",null);e["default"]=u.exports},2875:function(t,e,n){"use strict";n.r(e);var i=n("a3fb"),a=n("8b27");for(var o in a)"default"!==o&&function(t){n.d(e,t,function(){return a[t]})}(o);n("b051");var r=n("2877"),u=Object(r["a"])(a["default"],i["a"],i["b"],!1,null,"2a779fda",null);e["default"]=u.exports},"29be":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=a(n("a34a"));function a(t){return t&&t.__esModule?t:{default:t}}function o(t,e,n,i,a,o,r){try{var u=t[o](r),s=u.value}catch(c){return void n(c)}u.done?e(s):Promise.resolve(s).then(i,a)}function r(t){return function(){var e=this,n=arguments;return new Promise(function(i,a){var r=t.apply(e,n);function u(t){o(r,i,a,u,s,"next",t)}function s(t){o(r,i,a,u,s,"throw",t)}u(void 0)})}}function u(t,e){return f(t)||c(t,e)||s()}function s(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function c(t,e){var n=[],i=!0,a=!1,o=void 0;try{for(var r,u=t[Symbol.iterator]();!(i=(r=u.next()).done);i=!0)if(n.push(r.value),e&&n.length===e)break}catch(s){a=!0,o=s}finally{try{i||null==u["return"]||u["return"]()}finally{if(a)throw o}}return n}function f(t){if(Array.isArray(t))return t}var d={props:{noback:{type:Boolean,default:!0}},data:function(){return{providerList:[]}},onReady:function(){},methods:{MpLogin:function(t){var e=this;this.$http.post(t.url,{code:t.code,nickName:t.nickName,avatarUrl:t.avatarUrl}).then(function(t){var n=u(t,2),i=n[0],a=n[1];if(!e.$http.errorCheck(i,a))return!1;console.log(a.data.data),e.User.token=a.data.data.token,e.User.userinfo=e.User.__formatUserinfo(a.data.data),uni.setStorageSync("userinfo",e.User.userinfo),uni.setStorageSync("token",e.User.token),e.User.userinfo.id&&e.User.getCounts(),e.User.userinfo.id&&e.$chat.Open(),uni.showToast({title:"登录成功"}),e.$emit("logining"),e.noback||uni.navigateBack()})},getLoginAuth:function(){var t=this;uni.getProvider({service:"oauth",success:function(e){t.providerList=e.provider.map(function(t){var e="",n="";switch(t){case"weixin":e="微信登录",n="weixin";break;case"qq":e="QQ登录",n="QQ";break;case"sinaweibo":e="新浪微博登录",n="xinlangweibo";break}return{name:e,icon:n,id:t}})},fail:function(t){console.log("获取登录通道失败",t)}})},tologin:function(t){var e=this;uni.login({provider:t.id,success:function(n){uni.showLoading({title:"登陆中...",mask:!1}),console.log(n),uni.getUserInfo({provider:t.id,success:function(i){console.log(i),console.log(JSON.stringify(i.userInfo));var a=e.User.__formatOtherLogin(t.id,Object.assign(i,n));e.loginEvent(a)}}),console.log("登录成功，保存到本地存储，修改当前用户登录状态")},fail:function(t){console.log("login fail:",t)},complete:function(){uni.hideLoading()}})},loginEvent:function(){var t=r(i.default.mark(function t(e){var n;return i.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.User.login({url:"/user/otherlogin",data:e,Noback:this.noback});case 2:n=t.sent,n&&this.$emit("logining");case 4:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}()}};e.default=d},"36fa":function(t,e,n){var i=n("66e6");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=n("4f06").default;a("9e95684c",i,!0,{sourceMap:!1,shadowMode:!1})},"3b8d":function(t,e,n){"use strict";var i=n("7565"),a=n.n(i);a.a},"5d75":function(t,e,n){e=t.exports=n("2350")(!1),e.push([t.i,".other-login[data-v-2a779fda]{padding:%?20?% %?80?%}.other-login>uni-view>uni-view[data-v-2a779fda]{width:%?100?%;height:%?100?%;border-radius:100%;font-size:%?55?%!important;color:#fff!important}.other-login .icon-QQ[data-v-2a779fda]{background:#2caefc}.other-login .icon-weixin[data-v-2a779fda]{background:#2bd19b}.other-login .icon-xinlangweibo[data-v-2a779fda]{background:#fc7729}.other-login .icon-changyonglogo30[data-v-2a779fda]{background:#007aff}",""])},"5fe0":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"home-data u-f-ac animated fadeIn fast"},[t._l(t.homedata,function(e,i){return[n("v-uni-view",{key:i+"_0",staticClass:"u-f1 u-f-ajc u-f-column"},[n("v-uni-view",[t._v(t._s(e.num))]),t._v(t._s(e.name))],1)]})],2)},a=[];n.d(e,"a",function(){return i}),n.d(e,"b",function(){return a})},"60c6":function(t,e,n){"use strict";n.r(e);var i=n("7e29"),a=n.n(i);for(var o in i)"default"!==o&&function(t){n.d(e,t,function(){return i[t]})}(o);e["default"]=a.a},"66e6":function(t,e,n){e=t.exports=n("2350")(!1),e.push([t.i,".home-list[data-v-7f571da9]{padding:%?20?%}.home-adv[data-v-7f571da9]{padding:%?20?%}.home-adv>uni-image[data-v-7f571da9]{border-radius:%?20?%;height:%?150?%}",""])},7512:function(t,e,n){"use strict";n.r(e);var i=n("e2e6"),a=n.n(i);for(var o in i)"default"!==o&&function(t){n.d(e,t,function(){return i[t]})}(o);e["default"]=a.a},7565:function(t,e,n){var i=n("b760");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=n("4f06").default;a("73604c60",i,!0,{sourceMap:!1,shadowMode:!1})},"7e29":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={props:{homedata:Array}};e.default=i},"821d":function(t,e,n){"use strict";n.r(e);var i=n("bf25"),a=n("ecb4");for(var o in a)"default"!==o&&function(t){n.d(e,t,function(){return a[t]})}(o);n("3b8d");var r=n("2877"),u=Object(r["a"])(a["default"],i["a"],i["b"],!1,null,"6bbc502d",null);e["default"]=u.exports},"84c5":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",[t.loginStatus?[n("home-info",{attrs:{homeinfo:t.homeinfo}})]:[n("v-uni-view",{staticClass:"u-f-ajc"},[t._v("登陆仿糗百，体验更多功能")]),n("other-login",{attrs:{noback:!0},on:{logining:function(e){e=t.$handleEvent(e),t.isLogin()}}}),n("v-uni-view",{staticClass:"u-f-ajc",on:{click:function(e){e=t.$handleEvent(e),t.openLogin(e)}}},[t._v("账号密码登陆"),n("v-uni-view",{staticClass:"icon iconfont icon-jinru"})],1)],n("home-data",{attrs:{homedata:t.homedata}}),n("v-uni-view",{staticClass:"home-adv u-f-ajc animated fadeIn fast"},[n("v-uni-image",{attrs:{src:"https://tangzhe123-com.oss-cn-shenzhen.aliyuncs.com/Appstatic/qsbk/demo/demo20.jpg",mode:"widthFix","lazy-load":""}})],1),n("v-uni-view",{staticClass:"home-list"},[t._l(t.list,function(t,e){return[n("home-list-item",{key:e+"_0",attrs:{item:t,index:e}})]})],2)],2)},a=[];n.d(e,"a",function(){return i}),n.d(e,"b",function(){return a})},"8b27":function(t,e,n){"use strict";n.r(e);var i=n("29be"),a=n.n(i);for(var o in i)"default"!==o&&function(t){n.d(e,t,function(){return i[t]})}(o);e["default"]=a.a},"91b9":function(t,e,n){var i=n("b735");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=n("4f06").default;a("38fda5fb",i,!0,{sourceMap:!1,shadowMode:!1})},"9f66":function(t,e,n){"use strict";var i=n("91b9"),a=n.n(i);a.a},a2e7:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"home-list-item u-f-ac u-f-jsb animated fadeIn fast",attrs:{"hover-class":"home-list-hover"},on:{click:function(e){e=t.$handleEvent(e),t.clickevent(e)}}},[n("v-uni-view",{staticClass:"u-f-ac"},[t.item.icon?n("v-uni-view",{staticClass:"icon iconfont",class:["icon-"+t.item.icon]}):t._e(),t._v(t._s(t.item.name))],1),n("v-uni-view",{staticClass:"icon iconfont",class:{"icon-jinru":!t.item.data}},[t._v(t._s(t.item.data||""))])],1)},a=[];n.d(e,"a",function(){return i}),n.d(e,"b",function(){return a})},a3fb:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"other-login u-f-ac"})},a=[];n.d(e,"a",function(){return i}),n.d(e,"b",function(){return a})},b051:function(t,e,n){"use strict";var i=n("02a7"),a=n.n(i);a.a},b228:function(t,e,n){"use strict";n.r(e);var i=n("e2dd"),a=n.n(i);for(var o in i)"default"!==o&&function(t){n.d(e,t,function(){return i[t]})}(o);e["default"]=a.a},b735:function(t,e,n){e=t.exports=n("2350")(!1),e.push([t.i,".home-list-item[data-v-0ac703fe]{padding:%?20?%;border-top:%?1?% solid #f4f4f4;border-bottom:%?1?% solid #f4f4f4}.home-list-item>uni-view[data-v-0ac703fe]:first-child{color:#333}.home-list-item>uni-view:first-child>uni-view[data-v-0ac703fe]{margin-right:%?10?%}.home-list-item>uni-view[data-v-0ac703fe]:last-child{color:#ccc}.home-list-hover[data-v-0ac703fe]{background:#f4f4f4}",""])},b760:function(t,e,n){e=t.exports=n("2350")(!1),e.push([t.i,".home-info[data-v-6bbc502d]{padding:%?20?% %?40?%}.home-info>uni-image[data-v-6bbc502d]{-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;width:%?100?%;height:%?100?%;border-radius:100%;margin-right:%?15?%}.home-info>uni-view:first-of-type>uni-view[data-v-6bbc502d]:first-child{font-size:%?32?%}.home-info>uni-view:first-of-type>uni-view[data-v-6bbc502d]:last-child{color:#bbb}.home-info>uni-view[data-v-6bbc502d]:last-of-type{height:100%}",""])},bf25:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"home-info u-f-ac animated fadeIn fast",on:{click:function(e){e=t.$handleEvent(e),t.ToUserSpace(e)}}},[n("v-uni-image",{attrs:{src:t.homeinfo.userpic,"lazy-load":""}}),n("v-uni-view",{staticClass:"u-f1"},[n("v-uni-view",[t._v(t._s(t.homeinfo.username))]),n("v-uni-view",[t._v("总文章 "+t._s(t.homeinfo.totalnum)+"  今日 "+t._s(t.homeinfo.todaynum))])],1),n("v-uni-view",{staticClass:"icon iconfont icon-jinru"})],1)},a=[];n.d(e,"a",function(){return i}),n.d(e,"b",function(){return a})},d025:function(t,e,n){"use strict";var i=n("36fa"),a=n.n(i);a.a},db1c:function(t,e,n){"use strict";n.r(e);var i=n("a2e7"),a=n("b228");for(var o in a)"default"!==o&&function(t){n.d(e,t,function(){return a[t]})}(o);n("9f66");var r=n("2877"),u=Object(r["a"])(a["default"],i["a"],i["b"],!1,null,"0ac703fe",null);e["default"]=u.exports},e2dd:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=a(n("a34a"));function a(t){return t&&t.__esModule?t:{default:t}}function o(t,e){return s(t)||u(t,e)||r()}function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function u(t,e){var n=[],i=!0,a=!1,o=void 0;try{for(var r,u=t[Symbol.iterator]();!(i=(r=u.next()).done);i=!0)if(n.push(r.value),e&&n.length===e)break}catch(s){a=!0,o=s}finally{try{i||null==u["return"]||u["return"]()}finally{if(a)throw o}}return n}function s(t){if(Array.isArray(t))return t}function c(t,e,n,i,a,o,r){try{var u=t[o](r),s=u.value}catch(c){return void n(c)}u.done?e(s):Promise.resolve(s).then(i,a)}function f(t){return function(){var e=this,n=arguments;return new Promise(function(i,a){var o=t.apply(e,n);function r(t){c(o,i,a,r,u,"next",t)}function u(t){c(o,i,a,r,u,"throw",t)}r(void 0)})}}var d={props:{item:Object,index:Number},methods:{clickevent:function(){var t=this;switch(this.item.clicktype){case"navigateTo":if(this.item.url){var e={url:this.item.url};if(this.item.auth)return this.item.NoCheck?this.User.navigate(e,!0):this.User.navigate(e);uni.navigateTo(e)}break;case"switchTab":this.item.url&&uni.switchTab({url:this.item.url});break;case"clear":uni.showModal({title:"提示",content:"是否要清除缓存？",confirmText:"立刻清除",success:function(e){e.confirm&&(uni.clearStorage(),uni.showToast({title:"清除缓存成功！"}),t.User.logout(!1))}});break;case"bind":if(this.User.userbind[this.item.provider])return;this.bindother();break;case"nothing":uni.showToast({title:"更新中...",icon:"none"});break;case"update":this.lib.Update(!0);break}},bindother:function(){var t=this;uni.login({provider:this.item.provider,success:function(e){uni.getUserInfo({provider:t.item.provider,success:function(n){var i=Object.assign(n,e);t.bindEvent(t.User.__formatOtherLogin(t.item.provider,i))}})},fail:function(t){uni.showToast({title:"绑定失败",icon:"none"}),console.log("login fail:",t)}})},bindEvent:function(){var t=f(i.default.mark(function t(e){var n,a,r,u;return i.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return uni.showLoading({title:"绑定中...",mask:!1}),t.next=3,this.$http.post("/user/bindother",e,{token:!0,checkToken:!0});case 3:if(n=t.sent,a=o(n,2),r=a[0],u=a[1],this.$http.errorCheck(r,u)){t.next=9;break}return t.abrupt("return",uni.hideLoading());case 9:uni.hideLoading(),uni.showToast({title:"绑定成功！"}),this.User.userbind[this.item.provider]={nickname:e.nickName},uni.setStorageSync("userbind",this.User.userbind),this.$emit("updateuserbind");case 14:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}()}};e.default=d},e2e6:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=u(n("db1c")),a=u(n("821d")),o=u(n("2875")),r=u(n("1747"));function u(t){return t&&t.__esModule?t:{default:t}}var s={components:{homeListItem:i.default,homeInfo:a.default,otherLogin:o.default,homeData:r.default},data:function(){return{loginStatus:!1,homeinfo:{userpic:"../../static/demo/userpic/11.jpg",username:"昵称",totalnum:0,todaynum:0},homedata:[{name:"糗事",num:0},{name:"动态",num:0},{name:"评论",num:0},{name:"粉丝",num:0}],list:[{icon:"liulan",name:"浏览历史",clicktype:"navigateTo",url:"/pages/user-history/user-history"},{icon:"huiyuanvip",name:"糗百认证",clicktype:"nothing",url:""},{icon:"keyboard",name:"审核糗事",clicktype:"nothing",url:""},{icon:"shezhi",name:"我的设置",clicktype:"navigateTo",url:"/pages/user-set/user-set",auth:!0,NoCheck:!0}]}},onNavigationBarButtonTap:function(t){0==t.index&&this.User.navigate({url:"../user-set/user-set"},!1)},onShow:function(){this.isLogin()},methods:{isLogin:function(){if(!this.User.token)return this.loginStatus=!1,this.homeinfo={userpic:"",username:"",totalnum:0,todaynum:0},this.homedata[0].num=0,this.homedata[1].num=0,this.homedata[2].num=0,void(this.homedata[3].num=0);this.homeinfo.id=this.User.userinfo.id,this.homeinfo.userpic=this.User.userinfo.userpic,this.homeinfo.username=this.User.userinfo.username,this.homeinfo.totalnum=this.User.counts.post_count||0,this.homeinfo.todaynum=this.User.counts.today_posts_count||0,this.homedata[0].num=this.User.counts.post_count||0,this.homedata[1].num=this.User.counts.post_count||0,this.homedata[2].num=this.User.counts.comments_count||0,this.homedata[3].num=this.User.counts.withfen_count||0,this.loginStatus=!0},openLogin:function(){this.User.navigate({url:"../user-set/user-set"},!1)}}};e.default=s},ecb4:function(t,e,n){"use strict";n.r(e);var i=n("07c5"),a=n.n(i);for(var o in i)"default"!==o&&function(t){n.d(e,t,function(){return i[t]})}(o);e["default"]=a.a},ed76:function(t,e,n){e=t.exports=n("2350")(!1),e.push([t.i,".home-data[data-v-b1a9b936]{padding:%?20?% %?40?%}.home-data>uni-view[data-v-b1a9b936]{color:#989898}.home-data>uni-view>uni-view[data-v-b1a9b936]{font-size:%?32?%;color:#333}",""])},f797:function(t,e,n){var i=n("ed76");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=n("4f06").default;a("fe4483be",i,!0,{sourceMap:!1,shadowMode:!1})}}]);