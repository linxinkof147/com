(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-login-login"],{"02a7":function(t,n,e){var i=e("5d75");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=e("4f06").default;a("3338ed9e",i,!0,{sourceMap:!1,shadowMode:!1})},"15f8":function(t,n,e){"use strict";e.r(n);var i=e("7eb6"),a=e("d81f");for(var o in a)"default"!==o&&function(t){e.d(n,t,function(){return a[t]})}(o);e("526d");var r=e("2877"),u=Object(r["a"])(a["default"],i["a"],i["b"],!1,null,"bc419f96",null);n["default"]=u.exports},2875:function(t,n,e){"use strict";e.r(n);var i=e("a3fb"),a=e("8b27");for(var o in a)"default"!==o&&function(t){e.d(n,t,function(){return a[t]})}(o);e("b051");var r=e("2877"),u=Object(r["a"])(a["default"],i["a"],i["b"],!1,null,"2a779fda",null);n["default"]=u.exports},"29be":function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=a(e("a34a"));function a(t){return t&&t.__esModule?t:{default:t}}function o(t,n,e,i,a,o,r){try{var u=t[o](r),s=u.value}catch(c){return void e(c)}u.done?n(s):Promise.resolve(s).then(i,a)}function r(t){return function(){var n=this,e=arguments;return new Promise(function(i,a){var r=t.apply(n,e);function u(t){o(r,i,a,u,s,"next",t)}function s(t){o(r,i,a,u,s,"throw",t)}u(void 0)})}}function u(t,n){return l(t)||c(t,n)||s()}function s(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function c(t,n){var e=[],i=!0,a=!1,o=void 0;try{for(var r,u=t[Symbol.iterator]();!(i=(r=u.next()).done);i=!0)if(e.push(r.value),n&&e.length===n)break}catch(s){a=!0,o=s}finally{try{i||null==u["return"]||u["return"]()}finally{if(a)throw o}}return e}function l(t){if(Array.isArray(t))return t}var d={props:{noback:{type:Boolean,default:!0}},data:function(){return{providerList:[]}},onReady:function(){},methods:{MpLogin:function(t){var n=this;this.$http.post(t.url,{code:t.code,nickName:t.nickName,avatarUrl:t.avatarUrl}).then(function(t){var e=u(t,2),i=e[0],a=e[1];if(!n.$http.errorCheck(i,a))return!1;console.log(a.data.data),n.User.token=a.data.data.token,n.User.userinfo=n.User.__formatUserinfo(a.data.data),uni.setStorageSync("userinfo",n.User.userinfo),uni.setStorageSync("token",n.User.token),n.User.userinfo.id&&n.User.getCounts(),n.User.userinfo.id&&n.$chat.Open(),uni.showToast({title:"登录成功"}),n.$emit("logining"),n.noback||uni.navigateBack()})},getLoginAuth:function(){var t=this;uni.getProvider({service:"oauth",success:function(n){t.providerList=n.provider.map(function(t){var n="",e="";switch(t){case"weixin":n="微信登录",e="weixin";break;case"qq":n="QQ登录",e="QQ";break;case"sinaweibo":n="新浪微博登录",e="xinlangweibo";break}return{name:n,icon:e,id:t}})},fail:function(t){console.log("获取登录通道失败",t)}})},tologin:function(t){var n=this;uni.login({provider:t.id,success:function(e){uni.showLoading({title:"登陆中...",mask:!1}),console.log(e),uni.getUserInfo({provider:t.id,success:function(i){console.log(i),console.log(JSON.stringify(i.userInfo));var a=n.User.__formatOtherLogin(t.id,Object.assign(i,e));n.loginEvent(a)}}),console.log("登录成功，保存到本地存储，修改当前用户登录状态")},fail:function(t){console.log("login fail:",t)},complete:function(){uni.hideLoading()}})},loginEvent:function(){var t=r(i.default.mark(function t(n){var e;return i.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.User.login({url:"/user/otherlogin",data:n,Noback:this.noback});case 2:e=t.sent,e&&this.$emit("logining");case 4:case"end":return t.stop()}},t,this)}));function n(n){return t.apply(this,arguments)}return n}()}};n.default=d},"526d":function(t,n,e){"use strict";var i=e("9456"),a=e.n(i);a.a},"5d75":function(t,n,e){n=t.exports=e("2350")(!1),n.push([t.i,".other-login[data-v-2a779fda]{padding:%?20?% %?80?%}.other-login>uni-view>uni-view[data-v-2a779fda]{width:%?100?%;height:%?100?%;border-radius:100%;font-size:%?55?%!important;color:#fff!important}.other-login .icon-QQ[data-v-2a779fda]{background:#2caefc}.other-login .icon-weixin[data-v-2a779fda]{background:#2bd19b}.other-login .icon-xinlangweibo[data-v-2a779fda]{background:#fc7729}.other-login .icon-changyonglogo30[data-v-2a779fda]{background:#007aff}",""])},"7eb6":function(t,n,e){"use strict";var i=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("v-uni-view",{staticClass:"uni-status-bar",style:{height:t.statusBarHeight,background:t.bgcolor}},[t._t("default")],2)},a=[];e.d(n,"a",function(){return i}),e.d(n,"b",function(){return a})},"8a19":function(t,n,e){var i=e("e7cf");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=e("4f06").default;a("7794178d",i,!0,{sourceMap:!1,shadowMode:!1})},"8b27":function(t,n,e){"use strict";e.r(n);var i=e("29be"),a=e.n(i);for(var o in i)"default"!==o&&function(t){e.d(n,t,function(){return i[t]})}(o);n["default"]=a.a},"8ef7":function(t,n,e){"use strict";var i=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("v-uni-view",[e("uni-status-bar",{attrs:{bgcolor:"#FFE933"}}),e("v-uni-view",{staticClass:"icon iconfont icon-guanbi",on:{click:function(n){n=t.$handleEvent(n),t.back(n)}}}),e("v-uni-image",{staticClass:"loginhead",attrs:{src:"../../static/common/loginhead.png",mode:"widthFix","lazy-load":""}}),e("v-uni-view",{staticClass:"body"},[t.status?[e("v-uni-view",{staticClass:"login-input-box"},[e("v-uni-view",{staticClass:"phone u-f-ajc"},[t._v("+86")]),e("v-uni-input",{staticClass:"uni-input common-input phone-input",attrs:{type:"text",placeholder:"手机号"},model:{value:t.phone,callback:function(n){t.phone=n},expression:"phone"}})],1),e("v-uni-view",{staticClass:"login-input-box"},[e("v-uni-input",{staticClass:"uni-input common-input forget-input",attrs:{type:"text",placeholder:"请输入验证码"},model:{value:t.checknum,callback:function(n){t.checknum=n},expression:"checknum"}}),e("v-uni-view",{staticClass:"forget u-f-ajc login-font-color yanzhengma",on:{click:function(n){n=t.$handleEvent(n),t.getCheckNum(n)}}},[e("v-uni-view",{staticClass:"u-f-ajc"},[t._v(t._s(t.codetime?t.codetime+" s":"获取验证码"))])],1)],1)]:[e("v-uni-input",{staticClass:"uni-input common-input",attrs:{type:"text",placeholder:"昵称/手机号/邮箱"},model:{value:t.username,callback:function(n){t.username=n},expression:"username"}}),e("v-uni-view",{staticClass:"login-input-box"},[e("v-uni-input",{staticClass:"uni-input common-input forget-input",attrs:{type:"text",placeholder:"请输入密码"},model:{value:t.password,callback:function(n){t.password=n},expression:"password"}}),e("v-uni-view",{staticClass:"forget u-f-ajc login-font-color"},[t._v("忘记密码")])],1)],e("v-uni-button",{staticClass:"user-set-btn",class:{"user-set-btn-disable":t.disabled},attrs:{loading:t.loading,type:"primary",disabled:t.disabled},on:{click:function(n){n=t.$handleEvent(n),t.submit(n)}}},[t._v("登录")])],2),e("v-uni-view",{staticClass:"login-status u-f-ajc login-padding login-font-color",on:{click:function(n){n=t.$handleEvent(n),t.changeStatus(n)}}},[t._v(t._s(t.status?"账号密码登录":"验证码登录")),e("v-uni-view",{staticClass:"icon iconfont icon-jinru login-font-color"})],1),e("v-uni-view",{staticClass:"other-login-title u-f-ajc login-padding login-font-color"},[t._v("第三方登录")]),e("other-login",{attrs:{noback:!1}}),e("v-uni-view",{staticClass:"login-rule u-f-ajc login-padding login-font-color"},[t._v("注册即代表您同意"),e("v-uni-view",[t._v("《XXX协议》")])],1)],1)},a=[];e.d(n,"a",function(){return i}),e.d(n,"b",function(){return a})},9456:function(t,n,e){var i=e("9823");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=e("4f06").default;a("dcbe85f4",i,!0,{sourceMap:!1,shadowMode:!1})},9823:function(t,n,e){n=t.exports=e("2350")(!1),n.push([t.i,".uni-status-bar[data-v-bc419f96]{display:block;width:100%;height:20px;height:0}",""])},a3fb:function(t,n,e){"use strict";var i=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("v-uni-view",{staticClass:"other-login u-f-ac"})},a=[];e.d(n,"a",function(){return i}),e.d(n,"b",function(){return a})},b051:function(t,n,e){"use strict";var i=e("02a7"),a=e.n(i);a.a},d81f:function(t,n,e){"use strict";e.r(n);var i=e("dbb8"),a=e.n(i);for(var o in i)"default"!==o&&function(t){e.d(n,t,function(){return i[t]})}(o);n["default"]=a.a},dbb8:function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=uni.getSystemInfoSync().statusBarHeight+"px",a={name:"uni-status-bar",props:{bgcolor:{type:String,default:""}},data:function(){return{statusBarHeight:i}}};n.default=a},dea2:function(t,n,e){"use strict";e.r(n);var i=e("e7be"),a=e.n(i);for(var o in i)"default"!==o&&function(t){e.d(n,t,function(){return i[t]})}(o);n["default"]=a.a},e7be:function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=r(e("a34a")),a=r(e("15f8")),o=r(e("2875"));function r(t){return t&&t.__esModule?t:{default:t}}function u(t,n){return l(t)||c(t,n)||s()}function s(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function c(t,n){var e=[],i=!0,a=!1,o=void 0;try{for(var r,u=t[Symbol.iterator]();!(i=(r=u.next()).done);i=!0)if(e.push(r.value),n&&e.length===n)break}catch(s){a=!0,o=s}finally{try{i||null==u["return"]||u["return"]()}finally{if(a)throw o}}return e}function l(t){if(Array.isArray(t))return t}function d(t,n,e,i,a,o,r){try{var u=t[o](r),s=u.value}catch(c){return void e(c)}u.done?n(s):Promise.resolve(s).then(i,a)}function f(t){return function(){var n=this,e=arguments;return new Promise(function(i,a){var o=t.apply(n,e);function r(t){d(o,i,a,r,u,"next",t)}function u(t){d(o,i,a,r,u,"throw",t)}r(void 0)})}}var h={components:{uniStatusBar:a.default,otherLogin:o.default},data:function(){return{status:!1,disabled:!0,loading:!1,username:"",password:"",phone:"",checknum:"",codetime:0}},watch:{username:function(t){this.OnBtnChange()},password:function(t){this.OnBtnChange()},phone:function(t){this.OnBtnChange()},checknum:function(t){this.OnBtnChange()}},methods:{isPhone:function(){var t=/^1[34578]\d{9}$/;return t.test(this.phone)},getCheckNum:function(){var t=f(i.default.mark(function t(){var n,e,a,o,r,s=this;return i.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!(this.codetime>0)){t.next=2;break}return t.abrupt("return");case 2:if(this.isPhone()){t.next=4;break}return t.abrupt("return",uni.showToast({title:"请输入正确的手机号码",icon:"none"}));case 4:return t.next=6,this.$http.post("/user/sendcode",{phone:this.phone});case 6:if(n=t.sent,e=u(n,2),a=e[0],o=e[1],this.$http.errorCheck(a,o),30001!==o.data.errorCode){t.next=13;break}return t.abrupt("return");case 13:this.codetime=60,r=setInterval(function(){s.codetime--,s.codetime<1&&(clearInterval(r),s.codetime=0)},1e3);case 15:case"end":return t.stop()}},t,this)}));function n(){return t.apply(this,arguments)}return n}(),initInput:function(){this.username="",this.password="",this.phone="",this.checknum=""},OnBtnChange:function(){this.username&&this.password||this.phone&&this.checknum?this.disabled=!1:this.disabled=!0},changeStatus:function(){this.initInput(),this.status=!this.status},back:function(){uni.navigateBack({delta:1})},submit:function(){return this.status?this.isPhone()?this.User.login({url:"/user/phonelogin",data:{phone:this.phone,code:this.checknum}}):uni.showToast({title:"请输入正确的手机号码",icon:"none"}):this.User.login({url:"/user/login",data:{username:this.username,password:this.password}})}}};n.default=h},e7cf:function(t,n,e){n=t.exports=e("2350")(!1),n.push([t.i,'/* 公共按钮 */.user-set-btn[data-v-73098a3b]{width:100%;margin:%?20?% 0;background:#ffe933!important;border:0!important;color:#333!important}.user-set-btn-disable[data-v-73098a3b]{background:#f4f4f4!important;border:%?1?% solid #eee!important;color:#909090!important}.body[data-v-73098a3b]{padding:0 %?20?%!important}.common-input[data-v-73098a3b]{font-size:%?30?%;border-bottom:%?1?% solid #f4f4f4}.login-font-color[data-v-73098a3b]{color:#bbb}.login-padding[data-v-73098a3b]{padding:%?20?% 0}.icon-guanbi[data-v-73098a3b]{position:fixed;top:%?60?%;left:%?30?%;font-size:%?40?%;font-weight:700;color:#332f0a;z-index:100}.loginhead[data-v-73098a3b]{width:100%}.other-login-title[data-v-73098a3b]{position:relative}.other-login-title[data-v-73098a3b]:after,.other-login-title[data-v-73098a3b]:before{content:"";position:absolute;background:#bbb;height:%?1?%;width:%?100?%;top:50%}.other-login-title[data-v-73098a3b]:before{left:25%}.other-login-title[data-v-73098a3b]:after{right:25%}.login-input-box[data-v-73098a3b]{position:relative}.login-input-box .forget-input[data-v-73098a3b]{padding-right:%?150?%}.login-input-box .forget[data-v-73098a3b],.login-input-box .phone[data-v-73098a3b]{position:absolute;top:0;height:100%;z-index:100}.login-input-box .forget[data-v-73098a3b]{width:%?150?%;right:0}.login-input-box .phone[data-v-73098a3b]{width:%?100?%;left:0;font-weight:700}.login-input-box .phone-input[data-v-73098a3b]{padding-left:%?100?%}.yanzhengma uni-view[data-v-73098a3b]{background:#eee;border-radius:%?10?%;font-size:%?25?%;width:%?150?%;padding:%?10?% 0}',""])},ee58:function(t,n,e){"use strict";var i=e("8a19"),a=e.n(i);a.a},f077:function(t,n,e){"use strict";e.r(n);var i=e("8ef7"),a=e("dea2");for(var o in a)"default"!==o&&function(t){e.d(n,t,function(){return a[t]})}(o);e("ee58");var r=e("2877"),u=Object(r["a"])(a["default"],i["a"],i["b"],!1,null,"73098a3b",null);n["default"]=u.exports}}]);