(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-topic-detail-topic-detail"],{"02c6":function(t,e,i){"use strict";i.r(e);var n=i("bce9"),a=i("9fc0");for(var o in a)"default"!==o&&function(t){i.d(e,t,function(){return a[t]})}(o);var r=i("2877"),s=Object(r["a"])(a["default"],n["a"],n["b"],!1,null,"573573ca",null);e["default"]=s.exports},"141f":function(t,e,i){var n=i("986d");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=i("4f06").default;a("35822cad",n,!0,{sourceMap:!1,shadowMode:!1})},2225:function(t,e,i){"use strict";i.r(e);var n=i("314d"),a=i("4ed3");for(var o in a)"default"!==o&&function(t){i.d(e,t,function(){return a[t]})}(o);i("fe1b");var r=i("2877"),s=Object(r["a"])(a["default"],n["a"],n["b"],!1,null,"243559e4",null);e["default"]=s.exports},"314d":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",[i("v-uni-view",{staticClass:"topic-bg"},[i("v-uni-image",{attrs:{src:t.item.titlepic,mode:"aspectFill","lazy-load":""}})],1),i("v-uni-view",{staticClass:"topic-info"},[i("v-uni-view",{staticClass:"topic-info-t u-f-ac"},[i("v-uni-image",{attrs:{src:t.item.titlepic,mode:"widthFix","lazy-load":""}}),i("v-uni-view",[t._v("#"+t._s(t.item.title)+"#")])],1),i("v-uni-view",{staticClass:"topic-info-c u-f-ac"},[i("v-uni-view",[t._v("动态 "+t._s(t.item.totalnum))]),i("v-uni-view",[t._v("今日 "+t._s(t.item.todaynum))])],1),i("v-uni-view",{staticClass:"topic-info-b"},[t._v(t._s(t.item.desc))])],1)],1)},a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},"3abb":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"uni-tab-bar"},[i("v-uni-scroll-view",{staticClass:"uni-swiper-tab",style:t.scrollStyle,attrs:{"scroll-x":""}},[t._l(t.tabBars,function(e,n){return[i("v-uni-view",{key:e.id+"_0",staticClass:"swiper-tab-list",class:{active:t.tabIndex==n},style:t.scrollItemStyle,on:{click:function(e){e=t.$handleEvent(e),t.tabtap(n)}}},[t._v(t._s(e.name)+" "+t._s(e.num?e.num:"")),i("v-uni-view",{staticClass:"swiper-tab-line"})],1)]})],2)],1)},a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},4294:function(t,e,i){e=t.exports=i("2350")(!1),e.push([t.i,".uni-swiper-tab[data-v-beecc99a]{border-bottom:%?1?% solid #eee}.swiper-tab-list[data-v-beecc99a]{color:#969696;font-weight:700}.uni-tab-bar .active[data-v-beecc99a]{color:#343434}.active .swiper-tab-line[data-v-beecc99a]{border-bottom:%?6?% solid #fede33;width:%?70?%;margin:auto;border-top:%?6?% solid #fede33;border-radius:%?20?%}",""])},"4ed3":function(t,e,i){"use strict";i.r(e);var n=i("c93f"),a=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,function(){return n[t]})}(o);e["default"]=a.a},"5ef4":function(t,e,i){"use strict";i.r(e);var n=i("3abb"),a=i("e938");for(var o in a)"default"!==o&&function(t){i.d(e,t,function(){return a[t]})}(o);i("74c6");var r=i("2877"),s=Object(r["a"])(a["default"],n["a"],n["b"],!1,null,"beecc99a",null);e["default"]=s.exports},"74c6":function(t,e,i){"use strict";var n=i("dd03"),a=i.n(n);a.a},"986d":function(t,e,i){e=t.exports=i("2350")(!1),e.push([t.i,".topic-bg[data-v-243559e4]{width:100%;height:%?300?%;position:relative;overflow:hidden}.topic-bg>uni-image[data-v-243559e4]{width:100%;position:absolute;-webkit-filter:blur(10px);filter:blur(10px)}.topic-info[data-v-243559e4]{padding:0 %?25?%}.topic-info-t[data-v-243559e4]{position:relative}.topic-info-t>uni-image[data-v-243559e4]{width:%?150?%;height:%?150?%;border-radius:%?20?%;position:absolute;top:%?-75?%}.topic-info-t>uni-view[data-v-243559e4]{font-size:%?35?%;margin-left:%?170?%;-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1}.topic-info-c[data-v-243559e4]{padding:%?35?% 0 %?15?% 0}.topic-info-c uni-view[data-v-243559e4]{color:#cdcdcd}.topic-info-b[data-v-243559e4]{color:#a3a3a3;font-size:%?32?%;padding-bottom:%?10?%}",""])},"9fc0":function(t,e,i){"use strict";i.r(e);var n=i("f9c7"),a=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,function(){return n[t]})}(o);e["default"]=a.a},bce9:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",[i("topic-info",{attrs:{item:t.topicInfo}}),i("swiper-tab-head",{attrs:{tabBars:t.tabBars,tabIndex:t.tabIndex,scrollItemStyle:"width:50%;",scrollStyle:"border-bottom:0;"},on:{tabtap:function(e){e=t.$handleEvent(e),t.tabtap(e)}}}),i("v-uni-view",{staticClass:"topic-detail-list"},[t._l(t.tablist,function(e,n){return[t.tabIndex==n?[t._l(e.list,function(e,n){return[i("common-list",{key:n+"_0",attrs:{item:e,index:n},on:{changeevent:function(e){e=t.$handleEvent(e),t.updateData(e)}}})]}),i("load-more",{attrs:{loadtext:e.loadtext}})]:t._e()]})],2)],1)},a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},c2e0:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={props:{tabBars:Array,tabIndex:Number,scrollStyle:{type:String,default:""},scrollItemStyle:{type:String,default:""}},methods:{tabtap:function(t){this.$emit("tabtap",t)}}};e.default=n},c93f:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={props:{item:Object}};e.default=n},dd03:function(t,e,i){var n=i("4294");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=i("4f06").default;a("156cddf0",n,!0,{sourceMap:!1,shadowMode:!1})},e938:function(t,e,i){"use strict";i.r(e);var n=i("c2e0"),a=i.n(n);for(var o in n)"default"!==o&&function(t){i.d(e,t,function(){return n[t]})}(o);e["default"]=a.a},f9c7:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=u(i("a34a")),a=u(i("2225")),o=u(i("5ef4")),r=u(i("a488")),s=u(i("fc7a"));function u(t){return t&&t.__esModule?t:{default:t}}function c(t,e){return f(t)||l(t,e)||d()}function d(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function l(t,e){var i=[],n=!0,a=!1,o=void 0;try{for(var r,s=t[Symbol.iterator]();!(n=(r=s.next()).done);n=!0)if(i.push(r.value),e&&i.length===e)break}catch(u){a=!0,o=u}finally{try{n||null==s["return"]||s["return"]()}finally{if(a)throw o}}return i}function f(t){if(Array.isArray(t))return t}function p(t,e,i,n,a,o,r){try{var s=t[o](r),u=s.value}catch(c){return void i(c)}s.done?e(u):Promise.resolve(u).then(n,a)}function b(t){return function(){var e=this,i=arguments;return new Promise(function(n,a){var o=t.apply(e,i);function r(t){p(o,n,a,r,s,"next",t)}function s(t){p(o,n,a,r,s,"throw",t)}r(void 0)})}}var v={components:{topicInfo:a.default,swiperTabHead:o.default,commonList:r.default,loadMore:s.default},data:function(){return{topicInfo:{titlepic:"../../static/demo/topicpic/13.jpeg",title:"忆往事，敬余生",desc:"我是描述",totalnum:1e3,todaynum:1e3},tabIndex:0,tabBars:[{name:"默认",id:"moren"},{name:"最新",id:"zuixin"}],tablist:[{loadtext:"上拉加载更多",list:[],firstload:!1,page:1},{loadtext:"上拉加载更多",list:[],firstload:!1,page:1}]}},onReachBottom:function(){this.loadmore()},onPullDownRefresh:function(){this.getList()},onLoad:function(t){this.__init(JSON.parse(t.detail)),uni.$on("updateData",this.updateData)},methods:{updateData:function(t){switch(t.type){case"guanzhu":this.updateGuanZhu(t);break;case"support":this.updateSupport(t);break;case"updateComment":this.updateComment(t);break}},updateComment:function(t){var e=this.tablist[this.tabIndex].list.find(function(e){return e.id===t.post_id});e&&e.commentnum++},updateGuanZhu:function(t){this.tablist[this.tabIndex].list.forEach(function(e,i){e.userid===t.userid&&(e.isguanzhu=t.data)})},updateSupport:function(t){var e=this.tablist[this.tabIndex].list.find(function(e){return e.id===t.post_id});e&&1!==e.infonum.index&&"ding"==t.do&&(e.infonum.index=1,e.goodnum++)},__init:function(t){uni.setNavigationBarTitle({title:t.title}),this.topicInfo=t,this.getList()},getList:function(){var t=b(n.default.mark(function t(){var e,i,a,o,r,s,u,d;return n.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e="/topic/".concat(this.topicInfo.id,"/post/").concat(this.tablist[this.tabIndex].page),t.next=3,this.$http.get(e,{},{token:!0});case 3:if(i=t.sent,a=c(i,2),o=a[0],r=a[1],this.$http.errorCheck(o,r)){t.next=9;break}return t.abrupt("return",this.tablist[this.tabIndex].loadtext="上拉加载更多");case 9:for(s=[],u=r.data.data.list,d=0;d<u.length;d++)s.push(this.__format(u[d]));return this.tablist[this.tabIndex].list=this.tablist[this.tabIndex].page>1?this.tablist[this.tabIndex].list.concat(s):s,this.tablist[this.tabIndex].firstload=!0,uni.stopPullDownRefresh(),t.abrupt("return",this.tablist[this.tabIndex].loadtext=u.length<10?"没有更多数据了":"上拉加载更多");case 16:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),__format:function(t){return{userid:t.user.id,userpic:t.user.userpic,username:t.user.username,isguanzhu:!!t.user.fens.length,id:t.id,title:t.title,type:"img",titlepic:t.titlepic,video:!1,path:t.path,share:!!t.share,infonum:{index:t.support.length>0?t.support[0].type+1:0,dingnum:t.ding_count,cainum:t.cai_count},goodnum:t.ding_count,commentnum:t.comment_count,sharenum:t.sharenum,sex:t.user.userinfo.sex,age:t.user.userinfo.age}},loadmore:function(){"上拉加载更多"==this.tablist[this.tabIndex].loadtext&&(this.tablist[this.tabIndex].loadtext="加载中...",this.tablist[this.tabIndex].page++,this.getList())},tabtap:function(t){this.tabIndex=t,this.tablist[this.tabIndex].page=1,this.getList()}}};e.default=v},fe1b:function(t,e,i){"use strict";var n=i("141f"),a=i.n(n);a.a}}]);