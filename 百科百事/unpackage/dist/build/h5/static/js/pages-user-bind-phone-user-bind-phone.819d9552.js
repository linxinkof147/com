(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-user-bind-phone-user-bind-phone"],{"1afd":function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=o(e("a34a"));function o(t){return t&&t.__esModule?t:{default:t}}function r(t,n){return u(t)||s(t,n)||a()}function a(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function s(t,n){var e=[],i=!0,o=!1,r=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done);i=!0)if(e.push(a.value),n&&e.length===n)break}catch(u){o=!0,r=u}finally{try{i||null==s["return"]||s["return"]()}finally{if(o)throw r}}return e}function u(t){if(Array.isArray(t))return t}function c(t,n,e,i,o,r,a){try{var s=t[r](a),u=s.value}catch(c){return void e(c)}s.done?n(u):Promise.resolve(u).then(i,o)}function d(t){return function(){var n=this,e=arguments;return new Promise(function(i,o){var r=t.apply(n,e);function a(t){c(r,i,o,a,s,"next",t)}function s(t){c(r,i,o,a,s,"throw",t)}a(void 0)})}}var h={data:function(){return{isbind:!1,disabled:!0,loading:!1,phone:"",checknum:"",codetime:0}},onLoad:function(t){"false"!==t.phone&&t.phone&&"null"!==t.phone&&(this.isbind=!0,this.phone=t.phone)},watch:{phone:function(t){this.OnBtnChange()},checknum:function(t){this.OnBtnChange()}},methods:{isPhone:function(){var t=/^1[34578]\d{9}$/;return t.test(this.phone)},OnBtnChange:function(){this.phone&&this.checknum?this.disabled=!1:this.disabled=!0},getCheckNum:function(){var t=d(i.default.mark(function t(){var n,e,o,a,s,u=this;return i.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(!(this.codetime>0)){t.next=2;break}return t.abrupt("return");case 2:if(this.isPhone()){t.next=4;break}return t.abrupt("return",uni.showToast({title:"请输入正确的手机号码",icon:"none"}));case 4:return t.next=6,this.$http.post("/user/sendcode",{phone:this.phone});case 6:if(n=t.sent,e=r(n,2),o=e[0],a=e[1],this.$http.errorCheck(o,a),30001!==a.data.errorCode){t.next=13;break}return t.abrupt("return");case 13:this.codetime=60,s=setInterval(function(){u.codetime--,u.codetime<1&&(clearInterval(s),u.codetime=0)},1e3);case 15:case"end":return t.stop()}},t,this)}));function n(){return t.apply(this,arguments)}return n}(),submit:function(){var t=d(i.default.mark(function t(){var n,e,o,a,s;return i.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.$http.post("/user/bindphone",{phone:this.phone,code:this.checknum},{token:!0,checkToken:!0});case 2:if(n=t.sent,e=r(n,2),o=e[0],a=e[1],console.log(a),this.$http.errorCheck(o,a)){t.next=9;break}return t.abrupt("return");case 9:this.isbind=!0,this.disabled=!1,uni.showToast({title:"绑定成功！"}),s=a.data.data,"boolean"===typeof s?this.User.userinfo.phone=this.phone:this.User.userinfo=this.User.__formatUserinfo(s),uni.setStorageSync("userinfo",this.User.userinfo);case 15:case"end":return t.stop()}},t,this)}));function n(){return t.apply(this,arguments)}return n}()}};n.default=h},4291:function(t,n,e){"use strict";var i=function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("v-uni-view",{staticClass:"body"},[e("v-uni-input",{staticClass:"uni-input common-input",attrs:{type:"number",placeholder:"输入手机号",disabled:t.isbind},model:{value:t.phone,callback:function(n){t.phone=n},expression:"phone"}}),t.isbind?t._e():e("v-uni-view",{staticClass:"login-input-box"},[e("v-uni-input",{staticClass:"uni-input common-input forget-input",attrs:{type:"text",placeholder:"请输入验证码"},model:{value:t.checknum,callback:function(n){t.checknum=n},expression:"checknum"}}),e("v-uni-view",{staticClass:"forget u-f-ajc login-font-color yanzhengma",on:{click:function(n){n=t.$handleEvent(n),t.getCheckNum(n)}}},[e("v-uni-view",{staticClass:"u-f-ajc"},[t._v(t._s(t.codetime?t.codetime+" s":"获取验证码"))])],1)],1),e("v-uni-button",{staticClass:"user-set-btn",class:{"user-set-btn-disable":t.disabled},attrs:{loading:t.loading,type:"primary",disabled:t.disabled||t.isbind},on:{click:function(n){n=t.$handleEvent(n),t.submit(n)}}},[t._v(t._s(t.isbind?"已绑定":"立即绑定"))])],1)},o=[];e.d(n,"a",function(){return i}),e.d(n,"b",function(){return o})},"4c52":function(t,n,e){var i=e("7f16");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var o=e("4f06").default;o("7bdd13ee",i,!0,{sourceMap:!1,shadowMode:!1})},"5b24":function(t,n,e){"use strict";e.r(n);var i=e("1afd"),o=e.n(i);for(var r in i)"default"!==r&&function(t){e.d(n,t,function(){return i[t]})}(r);n["default"]=o.a},"7f16":function(t,n,e){n=t.exports=e("2350")(!1),n.push([t.i,"/* 公共按钮 */.user-set-btn[data-v-44270496]{width:100%;margin:%?20?% 0;background:#ffe933!important;border:0!important;color:#333!important}.user-set-btn-disable[data-v-44270496]{background:#f4f4f4!important;border:%?1?% solid #eee!important;color:#909090!important}.body[data-v-44270496]{padding:0 %?20?%!important}.common-input[data-v-44270496]{font-size:%?30?%;border-bottom:%?1?% solid #f4f4f4}.login-input-box[data-v-44270496]{position:relative}.login-input-box .forget-input[data-v-44270496]{padding-right:%?150?%}.login-input-box .forget[data-v-44270496]{position:absolute;top:0;height:100%;z-index:100}.login-input-box .forget[data-v-44270496]{width:%?150?%;right:0}.login-input-box .phone[data-v-44270496]{width:%?100?%;left:0;font-weight:700}.login-input-box .phone-input[data-v-44270496]{padding-left:%?100?%}.yanzhengma uni-view[data-v-44270496]{background:#eee;border-radius:%?10?%;font-size:%?25?%;width:%?150?%;padding:%?10?% 0}",""])},b827:function(t,n,e){"use strict";var i=e("4c52"),o=e.n(i);o.a},e8b3:function(t,n,e){"use strict";e.r(n);var i=e("4291"),o=e("5b24");for(var r in o)"default"!==r&&function(t){e.d(n,t,function(){return o[t]})}(r);e("b827");var a=e("2877"),s=Object(a["a"])(o["default"],i["a"],i["b"],!1,null,"44270496",null);n["default"]=s.exports}}]);