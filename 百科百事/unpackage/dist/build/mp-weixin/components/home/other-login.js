(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["components/home/other-login"],{"1a51":function(n,e,t){},2875:function(n,e,t){"use strict";t.r(e);var r=t("e12c"),o=t("8b27");for(var i in o)"default"!==i&&function(n){t.d(e,n,function(){return o[n]})}(i);t("8d71");var a=t("2877"),u=Object(a["a"])(o["default"],r["a"],r["b"],!1,null,null,null);e["default"]=u.exports},"8b27":function(n,e,t){"use strict";t.r(e);var r=t("e874"),o=t.n(r);for(var i in r)"default"!==i&&function(n){t.d(e,n,function(){return r[n]})}(i);e["default"]=o.a},"8d71":function(n,e,t){"use strict";var r=t("1a51"),o=t.n(r);o.a},e12c:function(n,e,t){"use strict";var r=function(){var n=this,e=n.$createElement;n._self._c},o=[];t.d(e,"a",function(){return r}),t.d(e,"b",function(){return o})},e874:function(n,e,t){"use strict";(function(n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=o(t("a34a"));function o(n){return n&&n.__esModule?n:{default:n}}function i(n,e,t,r,o,i,a){try{var u=n[i](a),s=u.value}catch(c){return void t(c)}u.done?e(s):Promise.resolve(s).then(r,o)}function a(n){return function(){var e=this,t=arguments;return new Promise(function(r,o){var a=n.apply(e,t);function u(n){i(a,r,o,u,s,"next",n)}function s(n){i(a,r,o,u,s,"throw",n)}u(void 0)})}}function u(n,e){return l(n)||c(n,e)||s()}function s(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function c(n,e){var t=[],r=!0,o=!1,i=void 0;try{for(var a,u=n[Symbol.iterator]();!(r=(a=u.next()).done);r=!0)if(t.push(a.value),e&&t.length===e)break}catch(s){o=!0,i=s}finally{try{r||null==u["return"]||u["return"]()}finally{if(o)throw i}}return t}function l(n){if(Array.isArray(n))return n}var f={props:{noback:{type:Boolean,default:!0}},data:function(){return{providerList:[]}},onReady:function(){},methods:{mpGetUserInfo:function(e){var t=this;if(n.showLoading({title:"登录中...",mask:!0}),"getUserInfo:ok"!==e.detail.errMsg)return n.hideLoading(),void n.showModal({title:"获取用户信息失败",content:"错误原因"+e.detail.errMsg,showCancel:!1});var r=e.detail.userInfo;n.login({provider:"weixin",success:function(e){t.$http.post("/wxlogin",{code:e.code,nickName:r.nickName,avatarUrl:r.avatarUrl}).then(function(e){var r=u(e,2),o=r[0],i=r[1];if(!t.$http.errorCheck(o,i))return!1;t.User.token=i.data.data.token,t.User.userinfo=t.User.__formatUserinfo(i.data.data),n.setStorageSync("userinfo",t.User.userinfo),n.setStorageSync("token",t.User.token),t.User.getCounts(),t.User.userinfo.id&&t.$chat.Open(),n.showToast({title:"登录成功"}),t.$emit("logining")})},complete:function(){n.hideLoading()}})},getLoginAuth:function(){var e=this;n.getProvider({service:"oauth",success:function(n){e.providerList=n.provider.map(function(n){var e="",t="";switch(n){case"weixin":e="微信登录",t="weixin";break;case"qq":e="QQ登录",t="QQ";break;case"sinaweibo":e="新浪微博登录",t="xinlangweibo";break;case"alipay":e="支付宝登录",t="";break}return{name:e,icon:t,id:n}})},fail:function(n){console.log("获取登录通道失败",n)}})},tologin:function(e){var t=this;n.login({provider:e.id,success:function(r){console.log(JSON.stringify(r)),n.getUserInfo({provider:e.id,success:function(n){console.log(JSON.stringify(n.userInfo));var o=t.User.__formatOtherLogin(e.id,Object.assign(n,r));t.loginEvent(o)}}),console.log("登录成功，保存到本地存储，修改当前用户登录状态")},fail:function(n){console.log("login fail:",n)}})},loginEvent:function(){var n=a(r.default.mark(function n(e){var t;return r.default.wrap(function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,this.User.login({url:"/user/otherlogin",data:e,Noback:this.noback});case 2:t=n.sent,t&&this.$emit("logining");case 4:case"end":return n.stop()}},n,this)}));function e(e){return n.apply(this,arguments)}return e}()}};e.default=f}).call(this,t("543d")["default"])}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'components/home/other-login-create-component',
    {
        'components/home/other-login-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('543d')['createComponent'](__webpack_require__("2875"))
        })
    },
    [['components/home/other-login-create-component']]
]);                
